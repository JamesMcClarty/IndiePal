@model IndiePal.Models.ViewModels.TalentListAndTalentViewModel
@{
    ViewData["Title"] = "AllTalents";
}

<section class="hero is-primary">
    <div class="hero-body">
        <div class="container">
            <h1 class="title">
                Talents
            </h1>
            <h2 class="subtitle">
                Take your pick of the talented!
            </h2>
        </div>
    </div>
</section>

@if (Model.Talent == null)
{
    <a asp-action="CreatingTalent">Create New Talent</a>
}

else
{
    <div class="box ">
        <article class="media">
            <div class="media-content">
                <div class="content">
                    <p>
                        <strong>@Model.Talent.ApplicationUser.UserName</strong>
                    </p>
                    <br>

                    <p>
                        <strong>Skills at a glance:</strong>
                    <p>

                        <ul>
                            @if (Model.Talent.Skills.Count > 3)
                            {
                                for (int i = 0; i < 3; i++)
                                {
                                    <li>@Model.Talent.Skills[i].Skill</li>
                                }
                            }
                            else
                            {
                                foreach (TalentSkill skill in Model.Talent.Skills)
                                {
                                    <li>@skill.Skill</li>
                                }
                            }
                        </ul>
                        <nav class="level is-mobile">
                            <div class="level-left">
                                <a asp-action="Details" asp-route-id="@Model.Talent.Id">Details</a> |
                                <a asp-action="Edit" asp-route-id="@Model.Talent.Id">Edit</a> |
                                @if (Model.Talent.Active == true)
                                {

                                    <button class="button is-primary" id="openCloseModal" data-target="#closemodal">Close Talent Account</button>

                                }
                                else
                                {
                                    <button class ="button is-primary" id="openOpenModal" data-target="#openmodal">Open Talent Account</button>
                                }
                            </div>
                        </nav>
                </div>
            </div>
        </article>
    </div>

    <div id="closemodal" class="modal">
        <div class="modal-background"></div>
        <div class="modal-content">
            <div class="box">
                <article class="media">
                    <div class="media-content">
                        <div class="content">
                            <p>
                                <strong>Warning</strong>
                                <br>
                                Do you wish to close your talent account? You can reopen it to be listed later.
                            </p>
                        </div>
                        <form asp-action="Close" asp-route-id="@Model.Talent.Id">
                            <button class="button is-primary">Accept</button>
                        </form>
                        <button class="button is-warning" id="closeCloseModal">Close</button>

                    </div>
                </article>
            </div>
        </div>
    </div>

    <div id="openmodal" class="modal">
        <div class="modal-background"></div>
        <div class="modal-content">
            <div class="box">
                <article class="media">
                    <div class="media-content">
                        <div class="content">
                            <p>
                                <strong>Warning</strong>
                                <br>
                                Open your account? It will be put back on the list.
                            </p>
                        </div>
                        <form asp-action="Reopen" asp-route-id="@Model.Talent.Id">
                            <button class="button is-primary">Accept</button>
                        </form>
                        <button class="button is-warning" id="closeOpenModal">Close</button>

                    </div>
                </article>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>
        $("#openCloseModal").click(function () {
            var target = $(this).data("target");
            $("html").addClass("is-clipped");
            $(target).addClass("is-active");
        });

        $("#closeCloseModal").click(function () {
            $("html").removeClass("is-clipped");
            $("#closemodal").removeClass("is-active");
        });

         $("#openOpenModal").click(function () {
            var target = $(this).data("target");
            $("html").addClass("is-clipped");
            $(target).addClass("is-active");
        });

        $("#closeOpenModal").click(function () {
            $("html").removeClass("is-clipped");
            $("#closemodal").removeClass("is-active");
        });
    </script>

}
